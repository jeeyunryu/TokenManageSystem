{
  "manifest": {
    "name": "@libp2p/interface-stream-muxer",
    "version": "3.0.6",
    "description": "Stream Muxer interface for libp2p",
    "license": "Apache-2.0 OR MIT",
    "homepage": "https://github.com/libp2p/js-libp2p-interfaces/tree/master/packages/interface-stream-muxer#readme",
    "repository": {
      "type": "git",
      "url": "git+https://github.com/libp2p/js-libp2p-interfaces.git"
    },
    "bugs": {
      "url": "https://github.com/libp2p/js-libp2p-interfaces/issues"
    },
    "keywords": [
      "interface",
      "libp2p"
    ],
    "engines": {
      "node": ">=16.0.0",
      "npm": ">=7.0.0"
    },
    "type": "module",
    "types": "./dist/src/index.d.ts",
    "files": [
      "src",
      "dist",
      "!dist/test",
      "!**/*.tsbuildinfo"
    ],
    "exports": {
      ".": {
        "types": "./dist/src/index.d.ts",
        "import": "./dist/src/index.js"
      }
    },
    "eslintConfig": {
      "extends": "ipfs",
      "parserOptions": {
        "sourceType": "module"
      }
    },
    "release": {
      "branches": [
        "master"
      ],
      "plugins": [
        [
          "@semantic-release/commit-analyzer",
          {
            "preset": "conventionalcommits",
            "releaseRules": [
              {
                "breaking": true,
                "release": "major"
              },
              {
                "revert": true,
                "release": "patch"
              },
              {
                "type": "feat",
                "release": "minor"
              },
              {
                "type": "fix",
                "release": "patch"
              },
              {
                "type": "docs",
                "release": "patch"
              },
              {
                "type": "test",
                "release": "patch"
              },
              {
                "type": "deps",
                "release": "patch"
              },
              {
                "scope": "no-release",
                "release": false
              }
            ]
          }
        ],
        [
          "@semantic-release/release-notes-generator",
          {
            "preset": "conventionalcommits",
            "presetConfig": {
              "types": [
                {
                  "type": "feat",
                  "section": "Features"
                },
                {
                  "type": "fix",
                  "section": "Bug Fixes"
                },
                {
                  "type": "chore",
                  "section": "Trivial Changes"
                },
                {
                  "type": "docs",
                  "section": "Documentation"
                },
                {
                  "type": "deps",
                  "section": "Dependencies"
                },
                {
                  "type": "test",
                  "section": "Tests"
                }
              ]
            }
          }
        ],
        "@semantic-release/changelog",
        "@semantic-release/npm",
        "@semantic-release/github",
        "@semantic-release/git"
      ]
    },
    "scripts": {
      "clean": "aegir clean",
      "lint": "aegir lint",
      "dep-check": "aegir dep-check",
      "build": "aegir build",
      "release": "aegir release"
    },
    "dependencies": {
      "@libp2p/interface-connection": "^4.0.0",
      "@libp2p/interfaces": "^3.0.0",
      "it-stream-types": "^1.0.4"
    },
    "devDependencies": {
      "aegir": "^38.1.0"
    },
    "typedoc": {
      "entryPoint": "./src/index.ts"
    },
    "_registry": "npm",
    "_loc": "/home/ubuntu/.cache/yarn/v6/npm-@libp2p-interface-stream-muxer-3.0.6-f84fae484290b667a1b4ffa51af7d6138765a698-integrity/node_modules/@libp2p/interface-stream-muxer/package.json",
    "readmeFilename": "README.md",
    "readme": "# @libp2p/interface-stream-muxer <!-- omit in toc -->\n\n[![libp2p.io](https://img.shields.io/badge/project-libp2p-yellow.svg?style=flat-square)](http://libp2p.io/)\n[![Discuss](https://img.shields.io/discourse/https/discuss.libp2p.io/posts.svg?style=flat-square)](https://discuss.libp2p.io)\n[![codecov](https://img.shields.io/codecov/c/github/libp2p/js-libp2p-interfaces.svg?style=flat-square)](https://codecov.io/gh/libp2p/js-libp2p-interfaces)\n[![CI](https://img.shields.io/github/actions/workflow/status/libp2p/js-libp2p-interfaces/js-test-and-release.yml?branch=master\\&style=flat-square)](https://github.com/libp2p/js-libp2p-interfaces/actions/workflows/js-test-and-release.yml?query=branch%3Amaster)\n\n> Stream Muxer interface for libp2p\n\n## Table of contents <!-- omit in toc -->\n\n- [Install](#install)\n- [Modules that implement the interface](#modules-that-implement-the-interface)\n- [Badge](#badge)\n- [Usage](#usage)\n- [API](#api)\n  - [`const muxer = new Muxer([options])`](#const-muxer--new-muxeroptions)\n  - [`muxer.onStream`](#muxeronstream)\n  - [`muxer.onStreamEnd`](#muxeronstreamend)\n  - [`const stream = await muxer.newStream([options])`](#const-stream--await-muxernewstreamoptions)\n  - [`const streams = muxer.streams`](#const-streams--muxerstreams)\n- [API Docs](#api-docs)\n- [License](#license)\n- [Contribution](#contribution)\n\n## Install\n\n```console\n$ npm i @libp2p/interface-stream-muxer\n```\n\nThe primary goal of this module is to enable developers to pick and swap their stream muxing module as they see fit for their application, without having to go through shims or compatibility issues. This module and test suite was heavily inspired by [abstract-blob-store](https://github.com/maxogden/abstract-blob-store).\n\nPublishing a test suite as a module lets multiple modules all ensure compatibility since they use the same test suite.\n\nThe API is presented with both Node.js and Go primitives, however, there is no actual limitations for it to be extended for any other language, pushing forward the cross compatibility and interop through different stacks.\n\n## Modules that implement the interface\n\n- [js-libp2p-spdy](https://github.com/libp2p/js-libp2p-spdy)\n- [js-libp2p-mplex](https://github.com/libp2p/js-libp2p-mplex)\n\nSend a PR to add a new one if you happen to find or write one.\n\n## Badge\n\nInclude this badge in your readme if you make a new module that uses interface-stream-muxer API.\n\n![](img/badge.png)\n\n## Usage\n\nInstall `interface-stream-muxer` as one of the dependencies of your project and as a test file. Then, using `mocha` (for JavaScript) or a test runner with compatible API, do:\n\n```js\nconst test = require('libp2p-interfaces-compliance-tests/stream-muxer')\n\nconst common = {\n  async setup () {\n    return yourMuxer\n  },\n  async teardown () {\n    // cleanup\n  }\n}\n\n// use all of the test suits\ntest(common)\n```\n\n## API\n\nA valid (one that follows this abstraction) stream muxer, must implement the following API:\n\n### `const muxer = new Muxer([options])`\n\nCreate a new *duplex* stream that can be piped together with a connection in order to allow multiplexed communications.\n\ne.g.\n\n```js\nconst Muxer = require('your-muxer-module')\nimport { pipe } from 'it-pipe'\n\n// Create a duplex muxer\nconst muxer = new Muxer()\n\n// Use the muxer in a pipeline\npipe(conn, muxer, conn) // conn is duplex connection to another peer\n```\n\n`options` is an optional `Object` that may have the following properties:\n\n- `onStream` - A function called when receiving a new stream from the remote. e.g.\n  ```js\n  // Receive a new stream on the muxed connection\n  const onStream = stream => {\n    // Read from this stream and write back to it (echo server)\n    pipe(\n      stream,\n      source => (async function * () {\n        for await (const data of source) yield data\n      })()\n      stream\n    )\n  }\n  const muxer = new Muxer({ onStream })\n  // ...\n  ```\n  **Note:** The `onStream` function can be passed in place of the `options` object. i.e.\n  ```js\n  new Mplex(stream => { /* ... */ })\n  ```\n- `onStreamEnd` - A function called when a stream ends.\n  ```js\n     // Get notified when a stream has ended\n    const onStreamEnd = stream => {\n      // Manage any tracking changes, etc\n    }\n    const muxer = new Muxer({ onStreamEnd, ... })\n  ```\n- `signal` - An [`AbortSignal`](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal) which can be used to abort the muxer, *including* all of it's multiplexed connections. e.g.\n  ```js\n  const controller = new AbortController()\n  const muxer = new Muxer({ signal: controller.signal })\n\n  pipe(conn, muxer, conn)\n\n  controller.abort()\n  ```\n- `maxMsgSize` - The maximum size in bytes the data field of multiplexed messages may contain (default 1MB)\n\n### `muxer.onStream`\n\nUse this property as an alternative to passing `onStream` as an option to the `Muxer` constructor.\n\n```js\nconst muxer = new Muxer()\n// ...later\nmuxer.onStream = stream => { /* ... */ }\n```\n\n### `muxer.onStreamEnd`\n\nUse this property as an alternative to passing `onStreamEnd` as an option to the `Muxer` constructor.\n\n```js\nconst muxer = new Muxer()\n// ...later\nmuxer.onStreamEnd = stream => { /* ... */ }\n```\n\n### `const stream = await muxer.newStream([options])`\n\nInitiate a new stream with the remote. Returns a [duplex stream](https://gist.github.com/alanshaw/591dc7dd54e4f99338a347ef568d6ee9#duplex-it).\n\ne.g.\n\n```js\n// Create a new stream on the muxed connection\nconst stream = await muxer.newStream()\n\n// Use this new stream like any other duplex stream:\npipe([1, 2, 3], stream, consume)\n```\n\n### `const streams = muxer.streams`\n\nThe streams property returns an array of streams the muxer currently has open. Closed streams will not be returned.\n\n```js\nmuxer.streams.map(stream => {\n  // Log out the stream's id\n  console.log(stream.id)\n})\n```\n\n## API Docs\n\n- <https://libp2p.github.io/js-libp2p-interfaces/modules/_libp2p_interface_stream_muxer.html>\n\n## License\n\nLicensed under either of\n\n- Apache 2.0, ([LICENSE-APACHE](LICENSE-APACHE) / <http://www.apache.org/licenses/LICENSE-2.0>)\n- MIT ([LICENSE-MIT](LICENSE-MIT) / <http://opensource.org/licenses/MIT>)\n\n## Contribution\n\nUnless you explicitly state otherwise, any contribution intentionally submitted for inclusion in the work by you, as defined in the Apache-2.0 license, shall be dual licensed as above, without any additional terms or conditions.\n",
    "licenseText": "This project is dual licensed under MIT and Apache-2.0.\n\nMIT: https://www.opensource.org/licenses/mit\nApache-2.0: https://www.apache.org/licenses/license-2.0\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/@libp2p/interface-stream-muxer/-/interface-stream-muxer-3.0.6.tgz#f84fae484290b667a1b4ffa51af7d6138765a698",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/@libp2p/interface-stream-muxer/-/interface-stream-muxer-3.0.6.tgz",
    "hash": "f84fae484290b667a1b4ffa51af7d6138765a698",
    "integrity": "sha512-wbLrH/bdF8qe0CpPd3BFMSmUs085vc3/8zx5uhXJySD672enAc8Jw9gmAYd1pIqELdqJqBDg9EI0y1XMRxvVkw==",
    "registry": "npm",
    "packageName": "@libp2p/interface-stream-muxer",
    "cacheIntegrity": "sha512-wbLrH/bdF8qe0CpPd3BFMSmUs085vc3/8zx5uhXJySD672enAc8Jw9gmAYd1pIqELdqJqBDg9EI0y1XMRxvVkw== sha1-+E+uSEKQtmehtP+lGvfWE4dlppg="
  },
  "registry": "npm",
  "hash": "f84fae484290b667a1b4ffa51af7d6138765a698"
}