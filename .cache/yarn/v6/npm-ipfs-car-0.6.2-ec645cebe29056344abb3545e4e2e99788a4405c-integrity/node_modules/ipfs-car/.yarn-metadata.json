{
  "manifest": {
    "name": "ipfs-car",
    "version": "0.6.2",
    "description": "Convert files to content-addressed archives (.car) and back",
    "main": "dist/index.js",
    "types": "dist/index.d.ts",
    "files": [
      "/dist"
    ],
    "bin": {
      "ipfs-car": "dist/cjs/cli/cli.js"
    },
    "repository": {
      "type": "git",
      "url": "git+https://github.com/web3-storage/ipfs-car.git"
    },
    "keywords": [
      "ipfs",
      "content-addressable",
      "cid",
      "car"
    ],
    "author": {
      "name": "vasco-santos"
    },
    "license": "(Apache-2.0 AND MIT)",
    "scripts": {
      "build": "npm run compile:esm && npm run compile:cjs",
      "compile:esm": "ttsc -p tsconfig.json && echo '{ \"type\" : \"module\" }' > dist/esm/package.json",
      "compile:cjs": "tsc -p tsconfig-cjs.json",
      "lint": "tslint 'src/**/*.ts?(x)'",
      "test": "npm run lint && npm run build && npm run test:node && npm run test:browser",
      "test:node": "mocha -r ts-node/register test/**/*.node.test.ts",
      "test:browser": "playwright-test test/**/*.browser.test.ts"
    },
    "exports": {
      "./pack": {
        "browser": "./dist/esm/pack/index.js",
        "import": "./dist/esm/pack/index.js",
        "require": "./dist/cjs/pack/index.js"
      },
      "./pack/blob": {
        "browser": "./dist/esm/pack/blob.js",
        "import": "./dist/esm/pack/blob.js",
        "require": "./dist/cjs/pack/blob.js"
      },
      "./pack/fs": {
        "browser": null,
        "import": "./dist/esm/pack/fs.js",
        "require": "./dist/cjs/pack/fs.js"
      },
      "./pack/stream": {
        "browser": null,
        "import": "./dist/esm/pack/stream.js",
        "require": "./dist/cjs/pack/stream.js"
      },
      "./unpack": {
        "browser": "./dist/esm/unpack/index.js",
        "import": "./dist/esm/unpack/index.js",
        "require": "./dist/cjs/unpack/index.js"
      },
      "./unpack/fs": {
        "browser": null,
        "import": "./dist/esm/unpack/fs.js",
        "require": "./dist/cjs/unpack/fs.js"
      },
      "./blockstore": {
        "browser": "./dist/esm/blockstore/index.js",
        "import": "./dist/esm/blockstore/index.js",
        "require": "./dist/cjs/blockstore/index.js"
      },
      "./blockstore/fs": {
        "browser": null,
        "import": "./dist/esm/blockstore/fs.js",
        "require": "./dist/cjs/blockstore/fs.js"
      },
      "./blockstore/idb": {
        "browser": "./dist/esm/blockstore/idb.js",
        "import": null,
        "require": null
      },
      "./blockstore/memory": {
        "browser": "./dist/esm/blockstore/memory.js",
        "import": "./dist/esm/blockstore/memory.js",
        "require": "./dist/cjs/blockstore/memory.js"
      }
    },
    "typesVersions": {
      "*": {
        "pack": [
          "dist/types/pack/index.d.ts"
        ],
        "pack/blob": [
          "dist/types/pack/blob.d.ts"
        ],
        "pack/fs": [
          "dist/types/pack/fs.d.ts"
        ],
        "pack/stream": [
          "dist/types/pack/stream.d.ts"
        ],
        "unpack": [
          "dist/types/unpack/index.d.ts"
        ],
        "unpack/fs": [
          "dist/types/unpack/fs.d.ts"
        ],
        "blockstore": [
          "dist/types/blockstore/index.d.ts"
        ],
        "blockstore/fs": [
          "dist/types/blockstore/fs.d.ts"
        ],
        "blockstore/idb": [
          "dist/types/blockstore/idb.d.ts"
        ],
        "blockstore/memory": [
          "dist/types/blockstore/memory.d.ts"
        ]
      }
    },
    "bugs": {
      "url": "https://github.com/web3-storage/ipfs-car/issues"
    },
    "homepage": "https://github.com/web3-storage/ipfs-car#readme",
    "dependencies": {
      "@ipld/car": "^3.2.3",
      "@web-std/blob": "^3.0.1",
      "bl": "^5.0.0",
      "blockstore-core": "^1.0.2",
      "browser-readablestream-to-it": "^1.0.2",
      "idb-keyval": "^6.0.3",
      "interface-blockstore": "^2.0.2",
      "ipfs-core-types": "^0.8.3",
      "ipfs-core-utils": "^0.12.1",
      "ipfs-unixfs-exporter": "^7.0.4",
      "ipfs-unixfs-importer": "^9.0.4",
      "ipfs-utils": "^9.0.2",
      "it-all": "^1.0.5",
      "it-last": "^1.0.5",
      "it-pipe": "^1.1.0",
      "meow": "^9.0.0",
      "move-file": "^2.1.0",
      "multiformats": "^9.6.3",
      "stream-to-it": "^0.2.3",
      "streaming-iterables": "^6.0.0",
      "uint8arrays": "^3.0.0"
    },
    "devDependencies": {
      "@types/bl": "^5.0.1",
      "@types/chai": "^4.2.18",
      "@types/mocha": "^8.2.2",
      "@types/sinon": "^10.0.2",
      "@web-std/file": "^3.0.0",
      "@zoltu/typescript-transformer-append-js-extension": "^1.0.1",
      "assert": "^2.0.0",
      "chai": "^4.3.4",
      "mocha": "9.0.2",
      "nyc": "^15.1.0",
      "playwright-test": "^7.2.2",
      "sinon": "^11.1.1",
      "ts-node": "^10.1.0",
      "tslint": "^6.1.3",
      "ttypescript": "^1.5.12",
      "typescript": "^4.3.5",
      "util": "^0.12.4"
    },
    "_registry": "npm",
    "_loc": "/home/ubuntu/.cache/yarn/v6/npm-ipfs-car-0.6.2-ec645cebe29056344abb3545e4e2e99788a4405c-integrity/node_modules/ipfs-car/package.json",
    "readmeFilename": "README.md",
    "readme": "# ipfs-car üöò‚ú®‚¨¢\n\n> Convert files to content-addressable archives (.car) and back\n\n[![Build](https://github.com/web3-storage/ipfs-car/actions/workflows/main.yml/badge.svg)](https://github.com/web3-storage/ipfs-car/actions/workflows/main.yml)\n[![dependencies Status](https://status.david-dm.org/gh/web3-storage/ipfs-car.svg)](https://david-dm.org/web3-storage/ipfs-car)\n[![JavaScript Style Guide](https://img.shields.io/badge/code_style-standard-brightgreen.svg)](https://standardjs.com)\n[![Downloads](https://img.shields.io/npm/dm/ipfs-car.svg)](https://www.npmjs.com/package/ipfs-car)\n[![Minzipped size](https://badgen.net/bundlephobia/minzip/ipfs-car)](https://bundlephobia.com/result?p=ipfs-car)\n\n## Description\n\n`ipfs-car` is a library and CLI tool to pack & unpack files from [Content Addressable aRchives (CAR)](https://github.com/ipld/specs/blob/master/block-layer/content-addressable-archives.md) file. A thin wrapper over [@ipld/car](https://github.com/ipld/js-car) and [unix-fs](https://github.com/ipfs/js-ipfs-unixfs).\n\nContent-addressable archives store data as blocks (a sequence of bytes) each prefixed with the [Content ID (CID)](https://docs.ipfs.io/concepts/content-addressing/) derived from the hash of the data; typically in a file with a `.car` extension.\n\nUse `ipfs-car` to pack your files into a .car; a portable, verifiable, IPFS compatible archive.\n\n```sh\n$ ipfs-car --pack path/to/files --output my-files.car\n```\n\nor unpack files from a .car, and verify that every block matches it's CID\n\n```sh\n$ ipfs-car --unpack my-files.car --output path/to/write/to\n```\n\nFetch and locally verify files from a IPFS gateway over http\n\n```sh\ncurl -X POST \"https://ipfs.io/api/v0/dag/export?arg=bafybeidd2gyhagleh47qeg77xqndy2qy3yzn4vkxmk775bg2t5lpuy7pcu\" | üöò\n```\n\n## Install\n\n```sh\n# install it as a dependency\n$ npm i ipfs-car\n\n# or use the cli without installing via `npx`\n$ npx ipfs-car --help\n```\n\n## Usage\n\n`--pack` files into a .car\n\n```sh\n# write a content addressed archive to the current working dir.\n$ ipfs-car --pack path/to/file/or/dir\n\n# specify the car file name.\n$ ipfs-car --pack path/to/files --output path/to/write/a.car\n```\n\n`--unpack` files from a .car\n\n```sh\n# unpack files to a specific path.\n$ ipfs-car --unpack path/to/my.car --output /path/to/unpack/files/to\n\n# unpack specific roots\n$ ipfs-car --unpack path/to/my.car --root <cid1> [--root <cid2>]\n\n# unpack files from a .car on stdin.\n$ cat path/to/my.car | ipfs-car --unpack\n```\n\nList the contents of a .car\n\n```sh\n# list the files.\n$ ipfs-car --list path/to/my.car\n\n# list the cid roots.\n$ ipfs-car --list-roots path/to/my.car\n\n# list the cids for all the blocks.\n$ ipfs-car --list-cids path/to/my.car\n```\n\n## API\n\nTo pack files into content-addressable archives, you can use the functions provided in:\n\n- `ipfs-car/pack` for consuming a [CAR writer](https://github.com/ipld/js-car#carwriter) async iterable\n- `ipfs-car/pack/blob` for getting a blob with the CAR file\n- `ipfs-car/pack/fs` for storing in the local file system (**Node.js only**)\n- `ipfs-car/pack/stream` for writing to a writable stream (**Node.js only**)\n\n‚ö†Ô∏è While packing files into CAR files, a [Blockstore](./src/blockstore) is used for temporary storage. All pack functions provide a default, but you can use other options (if supported on your runtime).\n\nTo unpack content-addressable archives to files, you can use the functions provided in:\n\n- `ipfs-car/unpack` for getting an async iterable of the UnixFS entries stored in the CAR file\n- `ipfs-car/unpack/fs` for writing the unpacked files to disk (**Node.js only**)\n\n### `ipfs-car/pack`\n\nTakes an [ImportCandidateStream](https://github.com/ipfs/js-ipfs/blob/master/packages/ipfs-core-types/src/utils.d.ts#L27) and returns a a [CAR writer](https://github.com/ipld/js-car#carwriter) async iterable.\n\n```js\nimport { pack } from 'ipfs-car/pack'\nimport { MemoryBlockStore } from 'ipfs-car/blockstore/memory' // You can also use the `level-blockstore` module\n\nconst { root, out } = await pack({\n  input: [new Uint8Array([21, 31, 41])],\n  blockstore: new MemoryBlockStore(),\n  wrapWithDirectory: true // Wraps input into a directory. Defaults to `true`\n  maxChunkSize: 262144 // The maximum block size in bytes. Defaults to `262144`. Max safe value is < 1048576 (1MiB)\n})\n\nconst carParts = []\nfor await (const part of out) {\n  carParts.push(part)\n}\n```\n\n### `ipfs-car/pack/blob`\n\nTakes an [ImportCandidateStream](https://github.com/ipfs/js-ipfs/blob/master/packages/ipfs-core-types/src/utils.d.ts#L27) and writes it to a [Blob](https://github.com/web-std/io/tree/main/blob).\n\n```js\nimport { packToBlob } from 'ipfs-car/pack/blob'\nimport { MemoryBlockStore } from 'ipfs-car/blockstore/memory' // You can also use the `level-blockstore` module\n\nconst { root, car } = await packToBlob({\n  input: [new Uint8Array([21, 31, 41])],\n  blockstore: new MemoryBlockStore()\n})\n```\n\n### `ipfs-car/pack/fs`\n\nTakes a path on disk and writes it to CAR file (**Node.js only**).\n\n```js\nimport { packToFs } from 'ipfs-car/pack/fs'\nimport { FsBlockStore } from 'ipfs-car/blockstore/fs'\n\nawait packToFs({\n  input: `${process.cwd()}/path/to/files`,\n  output: `${process.cwd()}/output.car`,\n  blockstore: new FsBlockStore()\n})\n// output.car file now exists in process.cwd()\n```\n\n### `ipfs-car/pack/stream`\n\nTakes a writable stream and pipes the CAR Writer stream to it (**Node.js only**).\n\n```js\nimport fs from 'fs'\nimport { packToStream } from 'ipfs-car/pack/stream'\nimport { FsBlockStore } from 'ipfs-car/blockstore/fs'\n\nconst writable = fs.createWriteStream(`${process.cwd()}/output.car`)\n\nawait packToStream({\n  input: `${process.cwd()}/path/to/files`,\n  writable,\n  blockstore: new FsBlockStore()\n})\n// output.car file now exists in process.cwd()\n```\n\n### `ipfs-car/unpack`\n\nTakes a CAR reader and yields files to be consumed.\n\n```js\nimport fs from 'fs'\nimport { unpack } from 'ipfs-car/unpack'\n\nconst inStream = fs.createReadStream(`${process.cwd()}/output.car`)\nconst carReader = await CarReader.fromIterable(inStream)\n\nconst files = []\nfor await (const file of unpack(carReader)) {\n  // Iterate over files\n}\n```\n\nTakes an AsyncIterable and yields files to be consumed.\n\n```js\nimport fs from 'fs'\nimport { unpackStream } from 'ipfs-car/unpack'\n\nconst inStream = fs.createReadStream(`${process.cwd()}/output.car`)\n\nconst files = []\nfor await (const file of unpackStream(inStream)) {\n  // Iterate over files\n}\n```\n\n`unpackStream` takes an options object, allowing you to pass in a `BlockStore` implementation. The blocks are unpacked from the stream in the order they appear, which may not be the order needed to reassemble them into the Files and Directories they represent. The blockstore is used to store the blocks as they are consumed from the stream. Once the stream is consumed, the blockstore provides the random access by CID to the blocks, needed to assemble the tree.\n\nThe default is a [`MemoryBlockStore`](./src/blockstore/memory.ts), that will store all the blocks in memory.\nFor larger CARs in the browser you can use IndexedDB by passing in an [IdbBlocksStore]('./src/blockstore/idb.ts'), and in Node.js you can provide a [FsBlockStore] instance to write blocks to the tmp dir.\n\n```js\n/* browser */\nimport { unpackStream } from 'ipfs-car/unpack'\nimport { IdbBlockStore } from 'ipfs-car/blockstore/idb'\n\nconst res = fetch(\n  'https://ipfs.io/api/v0/dag/export?arg=bafkreigh2akiscaildcqabsyg3dfr6chu3fgpregiymsck7e7aqa4s52zy',\n  { method: 'POST' }\n)\nconst files = []\nconst blockstore = new IdbBlockStore()\nfor await (const file of unpackStream(res.body, { blockstore })) {\n  // Iterate over files\n}\nblockstore.destroy()\n```\n\nWhen providing a custom Blockstore, it is your responsibiltiy to call `blockstore.destroy()` when you're finished. Failing to do so will fill up the users storage.\n\n### `ipfs-car/unpack/fs`\n\nTakes a path to a CAR file on disk and unpacks it to a given path\n\n```js\nimport { unpackToFs } from 'ipfs-car/unpack/fs'\n\nawait unpackToFs({\n  input: `${process.cwd()}/my.car`,\n  output: `${process.cwd()}/foo`\n})\n// foo now exists in process.cwd()\n// it is either a file or a directory depending on the contents of the .car\n```\n\nTakes a stream to a CAR file and unpacks it to a given path on disc\n\n```js\nimport fs from 'fs'\nimport { unpackStreamToFs } from 'ipfs-car/unpack/fs'\n\nconst input = fs.createReadStream(`${process.cwd()}/my.car`)\n\nawait unpackStreamToFs({\n  input,\n  output: `${process.cwd()}/foo`\n})\n// foo now exists in process.cwd()\n// it is either a file or a directory depending on the contents of the .car\n```\n"
  },
  "artifacts": [],
  "remote": {
    "resolved": "https://registry.yarnpkg.com/ipfs-car/-/ipfs-car-0.6.2.tgz#ec645cebe29056344abb3545e4e2e99788a4405c",
    "type": "tarball",
    "reference": "https://registry.yarnpkg.com/ipfs-car/-/ipfs-car-0.6.2.tgz",
    "hash": "ec645cebe29056344abb3545e4e2e99788a4405c",
    "integrity": "sha512-tliuakkKKtCa4TTnFT3zJKjq/aD8EGKX8Y0ybCyrAW0fo/n2koZpxiLjBvtTs47Rqyji6ggXo+atPbJJ60hJmg==",
    "registry": "npm",
    "packageName": "ipfs-car",
    "cacheIntegrity": "sha512-tliuakkKKtCa4TTnFT3zJKjq/aD8EGKX8Y0ybCyrAW0fo/n2koZpxiLjBvtTs47Rqyji6ggXo+atPbJJ60hJmg== sha1-7GRc6+KQVjRKuzVF5OLpl4ikQFw="
  },
  "registry": "npm",
  "hash": "ec645cebe29056344abb3545e4e2e99788a4405c"
}